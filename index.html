<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Quáº£n LÃ½ TÃ i ChÃ­nh CÃ¡ NhÃ¢n</title>

    <link rel="manifest" href="./manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="TÃ i ChÃ­nh">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#3b82f6">
    <meta name="msapplication-navbutton-color" content="#3b82f6">

    <link rel="apple-touch-icon" href="./logo-finance.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./logo-finance.png">
    <link rel="shortcut icon" href="./logo-finance.png" type="image/png">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="./styles.css">
</head>
<body class="font-sans antialiased ...">
    <div class="theme-switch-wrapper">
        <label class="theme-switch" for="darkModeToggleCheckbox">
            <input type="checkbox" id="darkModeToggleCheckbox">
            <div class="slider round">
                <span class="sun-icon">â˜€ï¸</span>
                <span class="moon-icon">ğŸŒ™</span>
            </div>
        </label>
    </div>

    <header class="app-header">
        <div class="header-content">
            <h1 class="header-title">
                <span class="header-icon">ğŸ’°</span>
                Quáº£n LÃ½ TÃ i ChÃ­nh
            </h1>
            <div class="header-summary">
                <div class="summary-card income">
                    <span class="summary-label">Thu nháº­p thÃ¡ng</span>
                    <span class="summary-value" id="header-income">0 â‚«</span>
                </div>
                <div class="summary-card expense">
                    <span class="summary-label">Chi tiÃªu thÃ¡ng</span>
                    <span class="summary-value" id="header-expense">0 â‚«</span>
                </div>
                <div class="summary-card balance">
                    <span class="summary-label">Sá»‘ dÆ°</span>
                    <span class="summary-value" id="header-balance">0 â‚«</span>
                </div>
            </div>
        </div>
    </header>

    <div id="message-box" class="message-box" style="display: none;"></div>

    <main class="main-container">
        <div class="tab-content-container">
            <section id="tab-transactions" class="tab-content active">
                <div class="quick-add-section">
                    <h2 class="section-title">
                        <span class="section-icon">âœï¸</span>
                        ThÃªm Giao Dá»‹ch Nhanh
                    </h2>

                    <form id="transaction-form" class="transaction-form">
                        <div class="form-row">
                            <label class="form-label">Loáº¡i giao dá»‹ch</label>
                            <div class="radio-group">
                                <label class="radio-option income-option">
                                    <input type="radio" name="type" value="Thu" required>
                                    <span class="radio-custom"></span>
                                    <span class="radio-text">Thu nháº­p</span>
                                </label>
                                <label class="radio-option expense-option">
                                    <input type="radio" name="type" value="Chi" checked required>
                                    <span class="radio-custom"></span>
                                    <span class="radio-text">Chi tiÃªu</span>
                                </label>
                                <label class="radio-option transfer-option">
                                    <input type="radio" name="type" value="Transfer" required>
                                    <span class="radio-custom"></span>
                                    <span class="radio-text">Chuyá»ƒn tiá»n</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-row">
							<label for="amount-input" class="form-label">Sá»‘ tiá»n</label>
							<div class="amount-input-group flex items-center bg-[var(--bg-tertiary)] rounded-2xl border border-[var(--border-color)] px-4 py-3 mt-1" style="min-height:58px;">
								<input type="text"
									   id="amount-input"
									   class="amount-input flex-1 bg-transparent outline-none border-0 text-xl text-[var(--text-primary)] h-[24px] min-h-[24px] px-1"
									   placeholder="Nháº­p sá»‘ tiá»n"
									   inputmode="decimal"
									   required>
								<select id="currency-selector" class="currency-selector ml-2 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded-xl px-3 py-2 border border-[var(--border-color)]">
									<option value="VND">VNÄ</option>
									<option value="USD">USD</option>
								</select>
							</div>
						</div>

                        <div class="form-row" id="category-row">
                            <label for="category-select" class="form-label">Háº¡ng má»¥c</label>
                            <select id="category-select" class="form-select" required>
                                <option value="">Chá»n háº¡ng má»¥c...</option>
                            </select>
                        </div>

                        <div class="form-row">
                            <label for="account-from" class="form-label" id="account-from-label">TÃ i khoáº£n</label>
                            <select id="account-from" class="form-select" required>
                                <option value="">Chá»n tÃ i khoáº£n...</option>
                            </select>
                        </div>

                        <div class="form-row" id="to-account-row" style="display: none;">
                            <label for="account-to" class="form-label">Äáº¿n tÃ i khoáº£n</label>
                            <select id="account-to" class="form-select">
                                <option value="">Chá»n tÃ i khoáº£n nháº­n...</option>
                            </select>
                        </div>

                        <div class="form-row">
                            <label for="description-input" class="form-label">MÃ´ táº£</label>
                            <input type="text"
                                   id="description-input"
                                   class="form-input"
                                   placeholder="MÃ´ táº£ giao dá»‹ch (tÃ¹y chá»n)"
                                   list="description-suggestions">
                            <datalist id="description-suggestions"></datalist>
                        </div>

                        <div class="form-row">
                            <label for="datetime-input" class="form-label">NgÃ y & Giá»</label>
                            <input type="datetime-local"
                                   id="datetime-input"
                                   class="form-input"
                                   required>
                        </div>

                        <div id="suggestion-area" class="suggestion-area" style="display: none;">
                            <div class="suggestion-content">
                                <span class="suggestion-text">
                                    Gá»£i Ã½: <strong id="suggestion-desc"></strong> - <strong id="suggestion-amount"></strong>
                                </span>
                                <div class="suggestion-actions">
                                    <button type="button" id="apply-suggestion" class="btn-suggestion apply">Ãp dá»¥ng</button>
                                    <button type="button" id="dismiss-suggestion" class="btn-suggestion dismiss">Bá» qua</button>
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="submit-btn" id="submit-btn">
                            <span class="btn-icon">â•</span>
                            <span class="btn-text">ThÃªm Giao Dá»‹ch</span>
                        </button>
                    </form>
                </div>

                <div class="transaction-list-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <span class="section-icon">ğŸ“‹</span>
                            Giao Dá»‹ch Gáº§n ÄÃ¢y
                        </h2>
                        <div class="filter-controls">
                            <select id="filter-period" class="filter-select">
                                <option value="today">HÃ´m nay</option>
                                <option value="week">Tuáº§n nÃ y</option>
                                <option value="month" selected>ThÃ¡ng nÃ y</option>
                                <option value="all">Táº¥t cáº£</option>
                            </select>
                            <input type="date" id="filter-date" class="filter-date">
                        </div>
                    </div>

                    <div class="transaction-list" id="transaction-list">
                        </div>

                    <div id="no-transactions" class="no-data" style="display: none;">
                        <span class="no-data-icon">ğŸ“</span>
                        <span class="no-data-text">ChÆ°a cÃ³ giao dá»‹ch nÃ o</span>
                    </div>
                </div>
            </section>

            <section id="tab-history" class="tab-content">
				<div class="transaction-calendar-section">
					<h3 class="subsection-title">ğŸ“… Lá»‹ch Giao Dá»‹ch</h3>
					
					<div class="calendar-container">
						<div class="calendar-header">
							<div class="month-navigation">
								<button class="nav-btn" id="prev-month-btn">â€¹</button>
								<div class="current-month" id="current-month-display">ThÃ¡ng nÃ y</div>
								<button class="nav-btn" id="next-month-btn">â€º</button>
							</div>
							
							<div class="month-summary-cards">
								<div class="summary-card income">
									<div class="summary-label">Tá»•ng thu nháº­p</div>
									<div class="summary-value" id="calendar-total-income">0 â‚«</div>
								</div>
								<div class="summary-card expense">
									<div class="summary-label">Tá»•ng Ä‘Ã£ chi</div>
									<div class="summary-value" id="calendar-total-expense">0 â‚«</div>
								</div>
							</div>
						</div>
						
						<div class="calendar-grid">
							<div class="calendar-weekdays">
								<div class="weekday">T2</div>
								<div class="weekday">T3</div>
								<div class="weekday">T4</div>
								<div class="weekday">T5</div>
								<div class="weekday">T6</div>
								<div class="weekday">T7</div>
								<div class="weekday">CN</div>
							</div>
							
							<div class="calendar-days-grid" id="calendar-days-grid">
								<!-- Days will be generated by JavaScript -->
							</div>
						</div>
					</div>
				</div>

				<!-- Transaction Detail Modal -->
				<div id="day-detail-modal" class="modal" style="display: none;">
					<div class="modal-content">
						<div class="modal-header">
							<h3 id="modal-day-title">Giao dá»‹ch ngÃ y</h3>
							<button class="modal-close" id="close-day-modal">&times;</button>
						</div>
						<div class="modal-body" id="modal-day-transactions">
							<!-- Transaction details will be loaded here -->
						</div>
					</div>
				</div>
				<div class="tab-header">
                    <h2 class="tab-title">
                        <span class="tab-icon">ğŸ¦</span>
                        Lá»‹ch Sá»­ & Äá»‘i SoÃ¡t
                    </h2>
                </div>

                <div class="account-balances-section">
                    <h3 class="subsection-title">Sá»‘ DÆ° TÃ i Khoáº£n</h3>
                    <div class="account-balance-grid" id="account-balance-grid">
                        </div>
                </div>

                <div class="reconciliation-section">
                    <h3 class="subsection-title">Äá»‘i SoÃ¡t TÃ i Khoáº£n</h3>
                    <div class="reconciliation-container">
                        <div class="reconciliation-scroll">
                            <table class="reconciliation-table" id="reconciliation-table">
                                <thead>
                                    <tr>
                                        <th class="sticky-col">Má»¥c / TÃ i khoáº£n</th>
                                        </tr>
                                </thead>
                                <tbody>
                                    </tbody>
                            </table>
                        </div>
                        <div class="scroll-hint">â† Vuá»‘t ngang Ä‘á»ƒ xem thÃªm cá»™t â†’</div>
                    </div>
                </div>

                <div class="reconciliation-history-section">
                    <h3 class="subsection-title">Lá»‹ch Sá»­ Äá»‘i SoÃ¡t</h3>
                    <div class="reconciliation-history" id="reconciliation-history">
                        </div>
                </div>
            </section>

            <section id="tab-statistics" class="tab-content">
                <div class="tab-header">
                    <h2 class="tab-title">
                        <span class="tab-icon">ğŸ“Š</span>
                        Thá»‘ng KÃª & Biá»ƒu Äá»“
                    </h2>
                    <select id="stats-period" class="bg-[var(--bg-secondary)] text-[var(--text-primary)] border border-[var(--border-color)] rounded-xl px-4 py-2">
                        <option value="month">ThÃ¡ng nÃ y</option>
                        <option value="quarter">QuÃ½ nÃ y</option>
                        <option value="year">NÄƒm nÃ y</option>
                        <option value="custom">TÃ¹y chá»‰nh</option>
                    </select>
                </div>

                <div class="stats-summary">
                    <div class="stats-card income-card">
                        <div class="stats-icon">ğŸ’°</div>
                        <div class="stats-content">
                            <div class="stats-label">Tá»•ng Thu Nháº­p</div>
                            <div class="stats-value" id="stats-total-income">0 â‚«</div>
                            <div class="stats-change" id="stats-income-change">0%</div>
                        </div>
                    </div>

                    <div class="stats-card expense-card">
                        <div class="stats-icon">ğŸ’¸</div>
                        <div class="stats-content">
                            <div class="stats-label">Tá»•ng Chi TiÃªu</div>
                            <div class="stats-value" id="stats-total-expense">0 â‚«</div>
                            <div class="stats-change" id="stats-expense-change">0%</div>
                        </div>
                    </div>

                    <div class="stats-card balance-card">
                        <div class="stats-icon">âš–ï¸</div>
                        <div class="stats-content">
                            <div class="stats-label">Sá»‘ DÆ° RÃ²ng</div>
                            <div class="stats-value" id="stats-net-balance">0 â‚«</div>
                            <div class="stats-change" id="stats-balance-change">0%</div>
                        </div>
                    </div>
                </div>

                <div class="chart-section">
                    <div class="chart-header">
                        <h3 class="chart-title">Chi TiÃªu Theo Danh Má»¥c</h3>
                        <div class="chart-controls">
                            <select id="chart-type" class="chart-type-selector">
                                <option value="doughnut">Biá»ƒu Ä‘á»“ trÃ²n</option>
                                <option value="bar">Biá»ƒu Ä‘á»“ cá»™t</option>
                            </select>
                        </div>
                    </div>

                    <div class="chart-container-wrapper">
                        <div class="chart-container" id="expense-chart-container">
                            <canvas id="expense-chart"></canvas>
                        </div>

                        <div class="chart-legend" id="expense-legend">
                            </div>
                    </div>
                </div>

                <div class="trend-section">
                    <h3 class="subsection-title">Xu HÆ°á»›ng 7 NgÃ y Qua</h3>
                    <div class="trend-chart-container">
                        <canvas id="trend-chart"></canvas>
                    </div>
                </div>

                <div class="comparison-section">
                    <h3 class="subsection-title">So SÃ¡nh ThÃ¡ng</h3>
                    <div class="comparison-chart-container">
                        <canvas id="comparison-chart"></canvas>
                    </div>
                </div>

				<div class="detailed-stats-section">
					<h3 class="subsection-title">Thá»‘ng KÃª Chi Tiáº¿t</h3>
					<div class="stats-table-container">
						<table class="stats-table">
							<thead>
								<tr>
									<th class="text-left">Danh Má»¥c</th>
									<th class="text-right">Sá»‘ Tiá»n</th>
									<th class="text-right">%</th>
									<th class="text-center">Tá»· Lá»‡</th>
								</tr>
							</thead>
							<tbody id="detailed-stats-tbody">
								<!-- Dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c render bá»Ÿi JavaScript -->
							</tbody>
						</table>
					</div>
				</div>
            </section>

            <section id="tab-categories" class="tab-content">
                <div class="tab-header">
                    <h2 class="tab-title">
                        <span class="tab-icon">ğŸ·ï¸</span>
                        Quáº£n LÃ½ Danh Má»¥c
                    </h2>
                </div>

                <div class="category-section">
                    <h3 class="category-section-title">
                        <span class="category-icon income">ğŸ’°</span>
                        Danh Má»¥c Thu Nháº­p
                    </h3>

                    <div class="add-category-form">
                        <div class="form-group">
                            <input type="text"
                                   id="new-income-category"
                                   class="category-input"
                                   placeholder="TÃªn danh má»¥c thu nháº­p má»›i">
                            <button id="add-income-category" class="add-category-btn">
                                <span class="btn-icon">â•</span>
                                ThÃªm
                            </button>
                        </div>
                        <div id="new-income-category-error" class="input-error-message" style="display: none;"></div>
                    </div>

                    <div class="category-list">
                        <ul id="income-category-list" class="category-items">
                            </ul>
                    </div>
                </div>

                <div class="category-section">
                    <h3 class="category-section-title">
                        <span class="category-icon expense">ğŸ’¸</span>
                        Danh Má»¥c Chi TiÃªu
                    </h3>

                    <div class="add-category-form">
                        <div class="form-group">
                            <input type="text"
                                   id="new-expense-category"
                                   class="category-input"
                                   placeholder="TÃªn danh má»¥c chi tiÃªu má»›i">
                            <button id="add-expense-category" class="add-category-btn">
                                <span class="btn-icon">â•</span>
                                ThÃªm
                            </button>
                        </div>
                        <div id="new-expense-category-error" class="input-error-message" style="display: none;"></div>
                    </div>

                    <div class="category-list">
                        <ul id="expense-category-list" class="category-items">
                            </ul>
                    </div>
                </div>

                <div class="category-section">
                    <h3 class="category-section-title">
                        <span class="category-icon account">ğŸ¦</span>
                        TÃ i Khoáº£n
                    </h3>

                    <div class="add-category-form">
                        <div class="form-group">
                            <input type="text"
                                   id="new-account"
                                   class="category-input"
                                   placeholder="TÃªn tÃ i khoáº£n má»›i">
                            <button id="add-account" class="add-category-btn">
                                <span class="btn-icon">â•</span>
                                ThÃªm
                            </button>
                        </div>
                        <div id="new-account-error" class="input-error-message" style="display: none;"></div>
                    </div>

                    <div class="category-list">
                        <ul id="account-list" class="category-items">
                            </ul>
                    </div>
                </div>
            </section>

            <section id="tab-settings" class="tab-content">
                <div class="tab-header">
                    <h2 class="tab-title">
                        <span class="tab-icon">âš™ï¸</span>
                        CÃ i Äáº·t & Backup
                    </h2>
                </div>

                <div class="settings-section">
                    <h3 class="settings-section-title">
                        <span class="settings-icon">ğŸ¨</span>
                        Giao Diá»‡n
                    </h3>

				<div class="theme-options">
				  <label class="theme-option">
					<input type="radio" name="theme" value="light" checked>
					<span class="theme-preview">ğŸŒ</span>
					<span class="theme-label">SÃ¡ng</span>
				  </label>
				  <label class="theme-option">
					<input type="radio" name="theme" value="dark">
					<span class="theme-preview">ğŸŒ™</span>
					<span class="theme-label">Tá»‘i</span>
				  </label>
				  <label class="theme-option">
					<input type="radio" name="theme" value="auto">
					<span class="theme-preview">ğŸ”„</span>
					<span class="theme-label">Tá»± Ä‘á»™ng</span>
				  </label>
				</div>
                <div class="settings-section">
                    <h3 class="settings-section-title">
                        <span class="settings-icon">ğŸ’¾</span>
                        Quáº£n LÃ½ Dá»¯ Liá»‡u
                    </h3>

                    <div class="data-actions">
                        <button id="export-json" class="action-btn export">
                            <span class="btn-icon">ğŸ“¥</span>
                            <div class="btn-content">
                                <span class="btn-title">Xuáº¥t JSON</span>
                                <span class="btn-subtitle">Backup toÃ n bá»™ dá»¯ liá»‡u</span>
                            </div>
                        </button>

                        <button id="export-csv" class="action-btn export">
                            <span class="btn-icon">ğŸ“Š</span>
                            <div class="btn-content">
                                <span class="btn-title">Xuáº¥t CSV</span>
                                <span class="btn-subtitle">Dá»¯ liá»‡u giao dá»‹ch</span>
                            </div>
                        </button>

                        <button id="import-data" class="action-btn import">
                            <span class="btn-icon">ğŸ“¤</span>
                            <div class="btn-content">
                                <span class="btn-title">Nháº­p Dá»¯ Liá»‡u</span>
                                <span class="btn-subtitle">KhÃ´i phá»¥c tá»« file JSON</span>
                            </div>
                        </button>

                        <input type="file" id="import-file" accept=".json" style="display: none;">
                    </div>
                </div>

                <div class="settings-section">
                    <h3 class="settings-section-title">
                        <span class="settings-icon">ğŸ’±</span>
                        Tiá»n Tá»‡
                    </h3>

                    <div class="currency-settings">
                        <div class="setting-item">
                            <label class="setting-label">Tá»· giÃ¡ USD/VNÄ</label>
                            <input type="number"
                                   id="usd-rate"
                                   class="setting-input"
                                   value="25000"
                                   min="1000"
                                   max="50000">
                            <div id="usd-rate-error" class="input-error-message" style="display: none;"></div>
                        </div>

                        <div class="setting-item">
                            <label class="setting-label">Tiá»n tá»‡ máº·c Ä‘á»‹nh</label>
                            <select id="default-currency" class="setting-select">
                                <option value="VND">Viá»‡t Nam Äá»“ng (â‚«)</option>
                                <option value="USD">US Dollar ($)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3 class="settings-section-title">
                        <span class="settings-icon">â„¹ï¸</span>
                        ThÃ´ng Tin á»¨ng Dá»¥ng
                    </h3>

                    <div class="app-info">
                        <div class="info-item">
                            <span class="info-label">PhiÃªn báº£n</span>
                            <span class="info-value">2.0.0</span>
                        </div>

                        <div class="info-item">
                            <span class="info-label">Tá»•ng giao dá»‹ch</span>
                            <span class="info-value" id="total-transactions">0</span>
                        </div>

                        <div class="info-item">
                            <span class="info-label">Dung lÆ°á»£ng dá»¯ liá»‡u</span>
                            <span class="info-value" id="data-size">0 KB</span>
                        </div>

                        <div class="info-item">
                            <span class="info-label">Láº§n backup cuá»‘i</span>
                            <span class="info-value" id="last-backup">ChÆ°a backup</span>
                        </div>
                    </div>
                </div>

                <div class="settings-section danger-section">
                    <h3 class="settings-section-title">
                        <span class="settings-icon">âš ï¸</span>
                        VÃ¹ng Nguy Hiá»ƒm
                    </h3>

                    <div class="danger-actions">
                        <button id="clear-data" class="action-btn danger">
                            <span class="btn-icon">ğŸ—‘ï¸</span>
                            <div class="btn-content">
                                <span class="btn-title">XÃ³a ToÃ n Bá»™ Dá»¯ Liá»‡u</span>
                                <span class="btn-subtitle">KhÃ´ng thá»ƒ khÃ´i phá»¥c</span>
                            </div>
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <nav class="bottom-nav">
        <button class="nav-item active" data-tab="transactions">
            <span class="nav-icon">ğŸ’³</span>
            <span class="nav-label">Giao Dá»‹ch</span>
        </button>

        <button class="nav-item" data-tab="history">
            <span class="nav-icon">ğŸ¦</span>
            <span class="nav-label">Lá»‹ch Sá»­</span>
        </button>

        <button class="nav-item" data-tab="statistics">
            <span class="nav-icon">ğŸ“Š</span>
            <span class="nav-label">Thá»‘ng KÃª</span>
        </button>

        <button class="nav-item" data-tab="categories">
            <span class="nav-icon">ğŸ·ï¸</span>
            <span class="nav-label">Danh Má»¥c</span>
        </button>

        <button class="nav-item" data-tab="settings">
            <span class="nav-icon">âš™ï¸</span>
            <span class="nav-label">CÃ i Äáº·t</span>
        </button>
    </nav>

    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <span class="loading-text">Äang táº£i...</span>
        </div>
    </div>

    <script src="./js/utils.js"></script>
	<script src="./js/categories.js"></script>
	<script src="./js/settings.js"></script>
	<script src="./js/transactions.js"></script>
	<script src="./js/history.js"></script>
	<script src="./js/statistics.js"></script>
	<script src="./js/app.js"></script>
    <script>
		if (typeof Utils !== 'undefined' && Utils.UIUtils) {
			// Mapping icons cho cÃ¡c danh má»¥c phá»• biáº¿n
			Utils.UIUtils.categoryIcons = {
				// Danh má»¥c chi tiÃªu
				'Ä‚n uá»‘ng': 'ğŸ´',
				'An uong': 'ğŸ´',
				'Thá»©c Äƒn': 'ğŸ½ï¸',
				'NhÃ  hÃ ng': 'ğŸª',
				'CÃ  phÃª': 'â˜•',
				
				'Äi láº¡i': 'ğŸš—',
				'Di lai': 'ğŸš—',
				'Xe cá»™': 'ğŸš™',
				'XÄƒng dáº§u': 'â›½',
				'Giao thÃ´ng': 'ğŸšŒ',
				'Taxi': 'ğŸš•',
				'Grab': 'ğŸš—',
				
				'Mua sáº¯m': 'ğŸ›’',
				'Mua sam': 'ğŸ›’',
				'Shopping': 'ğŸ›ï¸',
				'Quáº§n Ã¡o': 'ğŸ‘”',
				'Thá»i trang': 'ğŸ‘—',
				
				'Giáº£i trÃ­': 'ğŸ®',
				'Giai tri': 'ğŸ®',
				'Phim áº£nh': 'ğŸ¬',
				'Game': 'ğŸ¯',
				'Du lá»‹ch': 'ğŸ–ï¸',
				'Du lich': 'ğŸ–ï¸',
				
				'NhÃ  cá»­a': 'ğŸ ',
				'Nha cua': 'ğŸ ',
				'Tiá»n nhÃ ': 'ğŸ¡',
				'Äiá»‡n nÆ°á»›c': 'ğŸ’¡',
				'Dien nuoc': 'ğŸ’¡',
				'Internet': 'ğŸ“¶',
				'Wifi': 'ğŸ“¡',
				
				'Y táº¿': 'ğŸ¥',
				'Y te': 'ğŸ¥',
				'Thuá»‘c': 'ğŸ’Š',
				'Thuoc': 'ğŸ’Š',
				'KhÃ¡m bá»‡nh': 'âš•ï¸',
				'Kham benh': 'âš•ï¸',
				
				'Há»c táº­p': 'ğŸ“š',
				'Hoc tap': 'ğŸ“š',
				'GiÃ¡o dá»¥c': 'ğŸ“',
				'Giao duc': 'ğŸ“',
				'SÃ¡ch vá»Ÿ': 'ğŸ“–',
				'Sach vo': 'ğŸ“–',
				
				'LÃ m Ä‘áº¹p': 'ğŸ’„',
				'Lam dep': 'ğŸ’„',
				'Spa': 'ğŸ’†',
				'TÃ³c': 'ğŸ’‡',
				'Toc': 'ğŸ’‡',
				
				'Thá»ƒ thao': 'âš½',
				'The thao': 'âš½',
				'Gym': 'ğŸ‹ï¸',
				'BÆ¡i lá»™i': 'ğŸŠ',
				'Boi loi': 'ğŸŠ',
				
				'CÃ´ng viá»‡c': 'ğŸ’¼',
				'Cong viec': 'ğŸ’¼',
				'VÄƒn phÃ²ng pháº©m': 'ğŸ“',
				'Van phong pham': 'ğŸ“',
				
				'Gia Ä‘Ã¬nh': 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',
				'Gia dinh': 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',
				'Con cÃ¡i': 'ğŸ‘¶',
				'Con cai': 'ğŸ‘¶',
				
				'Tá»« thiá»‡n': 'â¤ï¸',
				'Tu thien': 'â¤ï¸',
				'QuyÃªn gÃ³p': 'ğŸ¤',
				'Quyen gop': 'ğŸ¤',
				
				'KhÃ¡c': 'ğŸ“¦',
				'Khac': 'ğŸ“¦',
				'KhÃ´ng phÃ¢n loáº¡i': 'â“',
				'Khong phan loai': 'â“',
				
				// Danh má»¥c thu nháº­p
				'LÆ°Æ¡ng': 'ğŸ’°',
				'Luong': 'ğŸ’°',
				'Tiá»n lÆ°Æ¡ng': 'ğŸ’µ',
				'Tien luong': 'ğŸ’µ',
				'ThÆ°á»Ÿng': 'ğŸ',
				'Thuong': 'ğŸ',
				'Freelance': 'ğŸ’»',
				'Äáº§u tÆ°': 'ğŸ“ˆ',
				'Dau tu': 'ğŸ“ˆ',
				'LÃ£i suáº¥t': 'ğŸ“Š',
				'Lai suat': 'ğŸ“Š',
				'BÃ¡n hÃ ng': 'ğŸ›’',
				'Ban hang': 'ğŸ›’',
				'Kinh doanh': 'ğŸª',
				'Kinh doanh': 'ğŸª',
				'Thu nháº­p khÃ¡c': 'ğŸ’',
				'Thu nhap khac': 'ğŸ’',
				
				// TÃ i khoáº£n
				'Tiá»n máº·t': 'ğŸ’µ',
				'Tien mat': 'ğŸ’µ',
				'NgÃ¢n hÃ ng': 'ğŸ¦',
				'Ngan hang': 'ğŸ¦',
				'VÃ­ Ä‘iá»‡n tá»­': 'ğŸ“±',
				'Vi dien tu': 'ğŸ“±',
				'Tháº» tÃ­n dá»¥ng': 'ğŸ’³',
				'The tin dung': 'ğŸ’³',
				'Tiáº¿t kiá»‡m': 'ğŸ›ï¸',
				'Tiet kiem': 'ğŸ›ï¸'
			};
			
			// HÃ m láº¥y icon cho danh má»¥c
			Utils.UIUtils.getCategoryIcon = function(categoryName) {
				if (!categoryName || typeof categoryName !== 'string') {
					return 'ğŸ“¦'; // Icon máº·c Ä‘á»‹nh
				}
				
				// TÃ¬m kiáº¿m chÃ­nh xÃ¡c trÆ°á»›c
				if (this.categoryIcons[categoryName]) {
					return this.categoryIcons[categoryName];
				}
				
				// TÃ¬m kiáº¿m khÃ´ng phÃ¢n biá»‡t hoa thÆ°á»ng
				const lowerCaseName = categoryName.toLowerCase();
				for (const [key, icon] of Object.entries(this.categoryIcons)) {
					if (key.toLowerCase() === lowerCaseName) {
						return icon;
					}
				}
				
				// TÃ¬m kiáº¿m tá»« khÃ³a chá»©a trong tÃªn danh má»¥c
				for (const [key, icon] of Object.entries(this.categoryIcons)) {
					if (lowerCaseName.includes(key.toLowerCase()) || key.toLowerCase().includes(lowerCaseName)) {
						return icon;
					}
				}
				
				// Icon máº·c Ä‘á»‹nh dá»±a trÃªn tá»« khÃ³a
				if (lowerCaseName.includes('Äƒn') || lowerCaseName.includes('an') || lowerCaseName.includes('food')) {
					return 'ğŸ´';
				} else if (lowerCaseName.includes('xe') || lowerCaseName.includes('di') || lowerCaseName.includes('transport')) {
					return 'ğŸš—';
				} else if (lowerCaseName.includes('mua') || lowerCaseName.includes('shop')) {
					return 'ğŸ›’';
				} else if (lowerCaseName.includes('nhÃ ') || lowerCaseName.includes('nha') || lowerCaseName.includes('house')) {
					return 'ğŸ ';
				} else if (lowerCaseName.includes('y táº¿') || lowerCaseName.includes('y te') || lowerCaseName.includes('health')) {
					return 'ğŸ¥';
				} else if (lowerCaseName.includes('há»c') || lowerCaseName.includes('hoc') || lowerCaseName.includes('education')) {
					return 'ğŸ“š';
				} else if (lowerCaseName.includes('lÆ°Æ¡ng') || lowerCaseName.includes('luong') || lowerCaseName.includes('salary')) {
					return 'ğŸ’°';
				} else if (lowerCaseName.includes('ngÃ¢n hÃ ng') || lowerCaseName.includes('ngan hang') || lowerCaseName.includes('bank')) {
					return 'ğŸ¦';
				}
				
				return 'ğŸ“¦'; // Icon máº·c Ä‘á»‹nh cuá»‘i cÃ¹ng
			};
			
			// HÃ m láº¥y mÃ u cho danh má»¥c (náº¿u chÆ°a cÃ³)
			if (!Utils.UIUtils.getCategoryColor) {
				Utils.UIUtils.categoryColors = [
					'#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6',
					'#06b6d4', '#84cc16', '#f97316', '#ec4899', '#6366f1',
					'#14b8a6', '#f43f5e', '#a855f7', '#22c55e', '#eab308',
					'#0ea5e9', '#8b5cf6', '#f97316', '#ec4899', '#6366f1'
				];
				
				Utils.UIUtils.getCategoryColor = function(categoryName, index = 0) {
					// Hash function Ä‘á»ƒ táº¡o mÃ u consistent cho má»—i tÃªn danh má»¥c
					let hash = 0;
					if (categoryName && typeof categoryName === 'string') {
						for (let i = 0; i < categoryName.length; i++) {
							const char = categoryName.charCodeAt(i);
							hash = ((hash << 5) - hash) + char;
							hash = hash & hash; // Convert to 32bit integer
						}
					}
					
					const colorIndex = Math.abs(hash + index) % this.categoryColors.length;
					return this.categoryColors[colorIndex];
				};
			}
			
			// HÃ m hex to rgba náº¿u chÆ°a cÃ³
			if (!Utils.UIUtils.hexToRgba) {
				Utils.UIUtils.hexToRgba = function(hex, alpha = 1) {
					const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
					if (result) {
						const r = parseInt(result[1], 16);
						const g = parseInt(result[2], 16);
						const b = parseInt(result[3], 16);
						return `rgba(${r}, ${g}, ${b}, ${alpha})`;
					}
					return hex; // Tráº£ vá» hex gá»‘c náº¿u khÃ´ng parse Ä‘Æ°á»£c
				};
			}
		}
		
		// ThÃªm functions cho icons náº¿u chÆ°a cÃ³
		if (typeof Utils !== 'undefined' && Utils.UIUtils) {
			Utils.UIUtils.getCategoryIcon = function(categoryName) {
				const icons = {
					'Giáº£i trÃ­': 'ğŸ®',
					'Ä‚n uá»‘ng': 'ğŸ´', 
					'Äi láº¡i': 'ğŸš—',
					'Mua sáº¯m': 'ğŸ›’',
					'NhÃ  cá»­a': 'ğŸ ',
					'Y táº¿': 'ğŸ¥',
					'Há»c táº­p': 'ğŸ“š',
					'LÃ m Ä‘áº¹p': 'ğŸ’„',
					'Thá»ƒ thao': 'âš½',
					'CÃ´ng viá»‡c': 'ğŸ’¼'
				};
				return icons[categoryName] || ['ğŸ“¦','ğŸ¯','â­','ğŸ”¥','ğŸ’'][Math.floor(Math.random()*5)];
			};
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => console.log('SW registered'))
                    .catch(error => console.log('SW registration failed'));
            });
        }
    </script>
</body>
</html>